# –ü—Ä–æ—Ü–µ—Å—Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –ø–µ—Ä–µ–ø–∏—Å–æ–∫ –≤ Telegram

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ **–í–°–ï–•** —Å–æ–æ–±—â–µ–Ω–∏–π Telegram-–±–æ—Ç–∞ –≤ Supabase + FTP. –§–∏–∫—Å–∏—Ä—É–µ—Ç —Ç–µ–∫—Å—Ç, —Ñ–æ—Ç–æ, –≤–∏–¥–µ–æ, –≥–æ–ª–æ—Å–æ–≤—ã–µ (—Å –ø–µ—Ä–µ–≤–æ–¥–æ–º –≤ —Ç–µ–∫—Å—Ç), –¥–æ–∫—É–º–µ–Ω—Ç—ã. **Proof-of-concept** –¥–ª—è –±–∏–∑–Ω–µ—Å–∞: —É—Å–ª–æ–≤–∏—è —Å–¥–µ–ª–æ–∫, –¥–æ–≥–æ–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ ‚Äî —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è **–¥–æ–∫–∞–∑—É–µ–º–æ** –¥–∞–∂–µ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –≤ TG.

## üéØ –î–ª—è –ö–æ–≥–æ

**–¶–ê: –ë–∏–∑–Ω–µ—Å–º–µ–Ω—ã, —Å–∞–º–æ–∑–∞–Ω—è—Ç—ã–µ, —Ñ—Ä–∏–ª–∞–Ω—Å–µ—Ä—ã**

- –§–∏–∫—Å–∏—Ä—É–π—Ç–µ —É—Å—Ç–Ω—ã–µ –¥–æ–≥–æ–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç–∏/—É—Å–ª–æ–≤–∏—è —Å–¥–µ–ª–æ–∫.
- **–°—É–¥–æ–¥–æ–∫–∞–∑—É–µ–º–æ**: SHA256-—Ö—ç—à (chat_id+user_id+message) + timestamp.
- –î–∞–∂–µ –µ—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç —É–¥–∞–ª–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ TG ‚Äî **—É –≤–∞—Å –µ—Å—Ç—å –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ**.
- –ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è: –ø—Ä–æ–¥–∞–∂–∏ —É—Å–ª—É–≥, –¥–æ–≥–æ–≤–æ—Ä–æ–≤, —Ç–µ–Ω–¥–µ—Ä–æ–≤, —á–∞—Ç–æ–≤ —Å –ø–∞—Ä—Ç–Ω–µ—Ä–∞–º–∏.

**–ü—Ä–∏–º–µ—Ä**: –ö–ª–∏–µ–Ω—Ç —Å–∫–∞–∑–∞–ª "–æ–ø–ª–∞—Ç–∞ 50% –ø—Ä–µ–¥–æ–ø–ª–∞—Ç–∞" –≤ –≥–æ–ª–æ—Å–æ–≤–æ–º ‚Üí –ª–æ–≥ —Å —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ç–æ–º + —Ö—ç—à ‚Üí —Å—É–¥ –ø—Ä–∏ —Å–ø–æ—Ä–µ.


## –°—Ö–µ–º–∞ workflow
![Workflow](screen.png)


## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ (5 –º–∏–Ω)

1. –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ `my_logs_workflow_clean.json` –≤ **n8n v2.4.4+**.
2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ **Credentials**:

| –°–µ—Ä–≤–∏—Å | Credential | –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è |
| :-- | :-- | :-- |
| Telegram | `YOUR_bot_for_logs` | Bot Token (BotFather) |
| Supabase | `Supabase account` | URL + Anon Key |
| OpenAI | `YOUR_open_ai` | GPT-4o-mini API Key |
| FTP | `FTP account` | –•–æ—Å—Ç/–ª–æ–≥–∏–Ω/–ø–∞—Ä–æ–ª—å –¥–ª—è `/my_logs/` |

3. –°–æ–∑–¥–∞–π—Ç–µ —Ç–∞–±–ª–∏—Ü—É `my_logs` –≤ Supabase:
4. –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ workflow.

## üóÑÔ∏è –¢–∞–±–ª–∏—Ü–∞ Supabase `my_logs`

```sql
CREATE TABLE my_logs (
  id BIGSERIAL PRIMARY KEY,
  chat_id BIGINT NOT NULL,      -- ID —á–∞—Ç–∞ TG
  username TEXT,                -- @username –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è
  name TEXT,                    -- –ò–º—è –§–∞–º–∏–ª–∏—è
  message TEXT NOT NULL,        -- –¢–µ–∫—Å—Ç/—Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ç/—Å—Å—ã–ª–∫–∞ –Ω–∞ —Ñ–∞–π–ª
  proof_hash TEXT UNIQUE NOT NULL, -- SHA256(chat_id+user_id+message)
  created_at TIMESTAMPTZ DEFAULT NOW()
);
```

**–ò–Ω–¥–µ–∫—Å—ã**:

```sql
CREATE INDEX idx_chat_id ON my_logs(chat_id);
CREATE INDEX idx_proof_hash ON my_logs(proof_hash);
CREATE INDEX idx_created_at ON my_logs(created_at);
```


## üîç –ß—Ç–æ –õ–æ–≥–∏—Ä—É–µ—Ç

| –¢–∏–ø | –û–±—Ä–∞–±–æ—Ç–∫–∞ | –•—Ä–∞–Ω–µ–Ω–∏–µ |
| :-- | :-- | :-- |
| **–¢–µ–∫—Å—Ç** | As-is | `message` |
| **–§–æ—Ç–æ** | –°–∫–∞—á–∏–≤–∞–µ—Ç ‚Üí FTP `/my_logs/` | –°—Å—ã–ª–∫–∞ `{{YOUR_DOMAIN}}/logs/file.jpg` |
| **–î–æ–∫—É–º–µ–Ω—Ç** | –°–∫–∞—á–∏–≤–∞–µ—Ç ‚Üí FTP | –°—Å—ã–ª–∫–∞ –Ω–∞ —Ñ–∞–π–ª |
| **–ì–æ–ª–æ—Å–æ–≤–æ–µ** | OpenAI ‚Üí —Ç–µ–∫—Å—Ç + FTP | –¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ç + —Å—Å—ã–ª–∫–∞ |
| **–í–∏–¥–µ–æ/–í–∏–¥–µ–æ-–Ω–æ—Ç—ã** | –°–∫–∞—á–∏–≤–∞–µ—Ç ‚Üí FTP | –°—Å—ã–ª–∫–∞ |
| **–í—Å–µ** | SHA256 —Ö—ç—à —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ | `proof_hash` –¥–ª—è —Å—É–¥–∞ |

## üéõÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
Telegram Trigger ‚Üí IF (photo/doc/voice/video/text)
                 ‚Üì
Get File ‚Üí FTP Upload ‚Üí Set (chat_id+message+link)
                 ‚Üì
Crypto SHA256 ‚Üí Supabase my_logs
```

**Sticky Notes** –≤ workflow –æ–ø–∏—Å—ã–≤–∞—é—Ç –≤–µ—Ç–∫–∏.

## ‚öñÔ∏è –Æ—Ä–∏–¥–∏—á–µ—Å–∫–∞—è –ó–∞—â–∏—Ç–∞

1. **–•—ç—à**: –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –ø–æ–¥–¥–µ–ª–∞—Ç—å/–∏–∑–º–µ–Ω–∏—Ç—å –±–µ–∑ –Ω–∞—Ä—É—à–µ–Ω–∏—è SHA256.
2. **Timestamp**: Supabase —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç –≤—Ä–µ–º—è.
3. **–ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç**: chat_id, username, name ‚Äî –∫—Ç–æ/–∫–æ–≥–¥–∞.
4. **–§–∞–π–ª—ã**: FTP –±—ç–∫–∞–ø ‚Äî –æ—Ä–∏–≥–∏–Ω–∞–ª—ã –Ω–µ –ø–æ—Ç–µ—Ä—è—é—Ç—Å—è.

**–ü—Ä–∏–º–µ—Ä –ª–æ–≥–∞**:

```
chat_id: 123456789
username: @client
name: –ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤
message: "–°–æ–≥–ª–∞—à–∞—é—Å—å –Ω–∞ 100–∫ –ø—Ä–µ–¥–æ–ø–ª–∞—Ç–∞"
proof_hash: "abc123def...base64"
```

## üì± –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

1. –ù–∞–ø—Ä–∞–≤—å—Ç–µ –±–æ—Ç–∞ –≤ –∫–∞–Ω–∞–ª/—á–∞—Ç.
2. **–í—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è** –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.
3. –≠–∫—Å–ø–æ—Ä—Ç –∏–∑ Supabase: `SELECT * FROM my_logs WHERE chat_id=123 ORDER BY created_at;`.



## PS: –ú–æ–∂–Ω–æ –µ—â–µ —É—Å–∏–ª–∏—Ç—å –ø—Ä–∏ –∂–µ–ª–∞–Ω–∏–∏! 

### üîó –¶–µ–ø–æ—á–∫–∞ –±–ª–æ–∫–æ–≤ (Hash Chaining) ‚Äî —Å–≤—è–∑—å —Å—Ç—Ä–æ–∫

–ò–¥–µ—è: –ö–∞–∂–¥–æ–µ –Ω–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∏—Ç —Ö—ç—à –ø—Ä–µ–¥—ã–¥—É—â–µ–π —Å—Ç—Ä–æ–∫–∏. –£–¥–∞–ª–∏—Ç—å/–∏–∑–º–µ–Ω–∏—Ç—å –æ—Ç–¥–µ–ª—å–Ω—É—é —Å—Ç—Ä–æ–∫—É = –ø–æ–ª–æ–º–∫–∞ –≤—Å–µ–π —Ü–µ–ø–æ—á–∫–∏ –ø–æ—Å–ª–µ.
-- **–ü–æ–ª–Ω–∞—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –ë–õ–û–ö–ß–ï–ô–ù–ê**

–ü—Ä–∏–º–µ—Ä:

- **–°—Ç—Ä–æ–∫–∞ 1**: chain_hash = "chat1+msg1+genesis"
- **–°—Ç—Ä–æ–∫–∞ 2**: chain_hash = "chat2+msg2+chain_hash1" 
- **–°—Ç—Ä–æ–∫–∞ 3**: chain_hash = "chat3+msg3+chain_hash2" ‚úÖ
–£–¥–∞–ª–∏—Ç—å —Å—Ç—Ä–æ–∫—É 2 ‚Üí chain_hash3 –ª–æ–º–∞–µ—Ç—Å—è ‚Üí **–í–°–ï —è—Å–Ω–æ**.


## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã
- **–í–µ—Ä—à–∏–Ω–∏–Ω–∞ –ù–∞—Ç–∞–ª–∏—è** –º–∞—Ä–∫–µ—Ç–æ–ª–æ–≥ –∏ n8n-–∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ç–æ—Ä
- **Telegram:** @vershininanata
- **Email:** vertunatpr@yandex.ru
- **–õ–æ–∫–∞—Ü–∏—è:** –ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫, –†–æ—Å—Å–∏—è

## Topics / –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞
- n8n 2.4.4
- telegram-bot
- telegram-logger
- telegram-api
- chat-logging
- message-logger
- n8n-workflow
- telegram-n8n
- supabase
- postgresql-logging
- automation
- chatbot